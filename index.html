<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personeelsbeheer Systeem</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #34495e;
            --accent: #3498db;
            --danger: #e74c3c;
            --warning: #f1c40f;
            --success: #2ecc71;
            --light: #ecf0f1;
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--light); margin: 0; display: flex; }
        
        /* Sidebar */
        nav { width: 250px; background: var(--primary); color: white; height: 100vh; padding: 20px; position: fixed; }
        nav h2 { border-bottom: 2px solid var(--accent); padding-bottom: 10px; }
        nav ul { list-style: none; padding: 0; }
        nav li { padding: 15px; cursor: pointer; border-radius: 5px; transition: 0.3s; }
        nav li:hover { background: var(--secondary); }

        /* Main Content */
        main { margin-left: 290px; padding: 40px; width: 100%; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: var(--accent); color: white; }

        /* Form styling */
        input, select, button { padding: 10px; margin: 5px 0; border-radius: 4px; border: 1px solid #ccc; }
        button { cursor: pointer; background: var(--accent); color: white; border: none; font-weight: bold; }
        button.delete { background: var(--danger); }
        button.warn { background: var(--warning); color: black; }

        .status-tag { padding: 4px 8px; border-radius: 4px; font-size: 0.85em; font-weight: bold; }
        .status-uitval { background: var(--danger); color: white; }
        
        .hidden { display: none; }
    </style>
</head>
<body>

<nav>
    <h2>Beheer Paneel</h2>
    <ul>
        <li onclick="showTab('medewerkers')">üë• Medewerkers</li>
        <li onclick="showTab('rooster')">üìÖ Rooster & Planning</li>
    </ul>
</nav>

<main id="app">
    <section id="tab-medewerkers">
        <h1>Medewerkersbeheer</h1>
        <div class="card">
            <h3>Nieuwe Medewerker Toevoegen</h3>
            <input type="text" id="m-naam" placeholder="Naam medewerker">
            <input type="text" id="m-rang" placeholder="Rang (bijv. Manager, Junior)">
            <input type="text" id="m-begeleider" placeholder="Begeleider naam">
            <button onclick="voegMedewerkerToe()">Toevoegen</button>
        </div>

        <div class="card">
            <h3>Personeelslijst</h3>
            <table id="medewerker-tabel">
                <thead>
                    <tr>
                        <th>Naam</th>
                        <th>Rang</th>
                        <th>Begeleider</th>
                        <th>Waarschuwingen</th>
                        <th>Acties</th>
                    </tr>
                </thead>
                <tbody id="lijst-body"></tbody>
            </table>
        </div>
    </section>

    <section id="tab-rooster" class="hidden">
        <h1>Rooster & Afwezigheid</h1>
        <div class="card">
            <h3>Dienst Inplannen / Wijzigen</h3>
            <select id="r-select-medewerker"></select>
            <input type="text" id="r-dag" placeholder="Dag (bijv. Maandag)">
            <input type="text" id="r-tijd" placeholder="Tijdstip (bijv. 09:00 - 17:00)">
            <button onclick="planDienst()">Inplannen</button>
        </div>

        <div class="card">
            <table id="rooster-tabel">
                <thead>
                    <tr>
                        <th>Medewerker</th>
                        <th>Dag/Tijd</th>
                        <th>Status</th>
                        <th>Afwezigheid Noteren</th>
                        <th>Acties</th>
                    </tr>
                </thead>
                <tbody id="rooster-body"></tbody>
            </table>
        </div>
    </section>
</main>

<script>
    // Data opslag (In een echte app zou dit naar een database gaan)
    let medewerkers = JSON.parse(localStorage.getItem('medewerkers')) || [];
    let rooster = JSON.parse(localStorage.getItem('rooster')) || [];

    function save() {
        localStorage.setItem('medewerkers', JSON.stringify(medewerkers));
        localStorage.setItem('rooster', JSON.stringify(rooster));
        render();
    }

    function showTab(tab) {
        document.getElementById('tab-medewerkers').classList.add('hidden');
        document.getElementById('tab-rooster').classList.add('hidden');
        document.getElementById('tab-' + tab).classList.remove('hidden');
    }

    function voegMedewerkerToe() {
        const naam = document.getElementById('m-naam').value;
        const rang = document.getElementById('m-rang').value;
        const begeleider = document.getElementById('m-begeleider').value;

        if(!naam) return alert("Vul een naam in");

        medewerkers.push({
            id: Date.now(),
            naam, rang, begeleider,
            waarschuwingen: 0,
            logs: []
        });
        save();
    }

    function geefWaarschuwing(id) {
        const m = medewerkers.find(x => x.id === id);
        m.waarschuwingen++;
        save();
    }

    function planDienst() {
        const mId = document.getElementById('r-select-medewerker').value;
        const dag = document.getElementById('r-dag').value;
        const tijd = document.getElementById('r-tijd').value;

        if(!mId) return alert("Selecteer een medewerker");

        rooster.push({
            id: Date.now(),
            mId: parseInt(mId),
            tijd: `${dag}: ${tijd}`,
            status: 'Normaal'
        });
        save();
    }

    function wisselStatus(id, nieuweStatus) {
        const item = rooster.find(x => x.id === id);
        item.status = nieuweStatus;
        save();
    }

    function voegAfwezigheidToe(mId, type) {
        const m = medewerkers.find(x => x.id === mId);
        let status = type;
        if(type === 'custom') {
            status = prompt("Voer aangepaste reden in (bijv. Absent Geoorloofd):");
        }
        if(status) {
            m.logs.push(status);
            alert(`Opgeslagen voor ${m.naam}: ${status}`);
            save();
        }
    }

    function render() {
        // Medewerkers Tabel
        const lijstBody = document.getElementById('lijst-body');
        lijstBody.innerHTML = '';
        const selectM = document.getElementById('r-select-medewerker');
        selectM.innerHTML = '<option value="">-- Kies Medewerker --</option>';

        medewerkers.forEach(m => {
            lijstBody.innerHTML += `
                <tr>
                    <td>${m.naam}</td>
                    <td><b>${m.rang}</b></td>
                    <td>üë§ ${m.begeleider}</td>
                    <td>‚ö†Ô∏è ${m.waarschuwingen}</td>
                    <td>
                        <button class="warn" onclick="geefWaarschuwing(${m.id})">+ Waarschuwing</button>
                        <button class="delete" onclick="medewerkers = medewerkers.filter(x=>x.id!=${m.id}); save();">Verwijder</button>
                    </td>
                </tr>
            `;
            selectM.innerHTML += `<option value="${m.id}">${m.naam}</option>`;
        });

        // Rooster Tabel
        const roosterBody = document.getElementById('rooster-body');
        roosterBody.innerHTML = '';
        rooster.forEach(r => {
            const m = medewerkers.find(x => x.id === r.mId);
            if(!m) return;

            roosterBody.innerHTML += `
                <tr>
                    <td>${m.naam}</td>
                    <td>${r.tijd}</td>
                    <td><span class="status-tag ${r.status === 'UITVAL' ? 'status-uitval' : ''}">${r.status}</span></td>
                    <td>
                        <select onchange="voegAfwezigheidToe(${m.id}, this.value); this.value='';">
                            <option value="">-- Noteer Absent --</option>
                            <option value="Absent Voor vergadering">Absent Voor vergadering</option>
                            <option value="Absent">Absent</option>
                            <option value="Absent Tijdens Werkuur">Absent Tijdens Werkuur</option>
                            <option value="Absent zonder afmelden">Absent zonder afmelden</option>
                            <option value="custom">+ Zelf toevoegen...</option>
                        </select>
                        <br><small>Historie: ${m.logs.slice(-1)}</small>
                    </td>
                    <td>
                        <button onclick="wisselStatus(${r.id}, 'WISSEL')">Wissel</button>
                        <button class="delete" onclick="wisselStatus(${r.id}, 'UITVAL')">Uitval</button>
                    </td>
                </tr>
            `;
        });
    }

    render();
</script>

</body>
</html>
